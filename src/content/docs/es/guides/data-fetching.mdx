---
title: Fetching de datos
description: Aprenda como obtener datos remotos con Astro utilizando la API de fetch.
i18nReady: true
---

Los archivos `.astro` pueden obtener datos remotos para ayudarte a generar tus p치ginas.

## `fetch()` en Astro

Todos los [componentes de Astro](/es/core-concepts/astro-components/) tienen acceso a la [funci칩n global `fetch()`](https://developer.mozilla.org/es/docs/Web/API/fetch) en su script de componente para hacer peticiones HTTP a APIs usando la URL completa (p.ej. https://example.com/api o `Astro.url + "/api"`).

Esta llamada a fetch ser치 ejecutada en el momento de la compilaci칩n, y los datos estar치n disponibles para la plantilla del componente para generar HTML din치mico. Si el modo [SSR](/es/guides/server-side-rendering/) est치 habilitado, cualquier llamada a fetch ser치 ejecutada en tiempo de ejecuci칩n.

游눠 Aprovecha el [**top-level await**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await#top_level_await) dentro del script del componente de Astro.

游눠 Puedes pasar los datos obtenidos a los componentes de Astro u otros UI frameworks como props.

```astro /await fetch\\(.*?\\)/
---
// src/components/User.astro
import Contact from '../components/Contact.jsx';
import Location from '../components/Location.astro';

const response = await fetch('https://randomuser.me/api/');
const data = await response.json();
const randomUser = data.results[0]
---
<!-- Los datos obtenidos en la compilaci칩n pueden ser usados en el HTML -->
<h1>Usuario</h1>
<h2>{randomUser.name.first} {randomUser.name.last}</h2>

<!-- Los datos obtenidos en la compilaci칩n pueden ser pasados como props a otros componentes -->
<Contact client:load email={randomUser.email} />
<Location city={randomUser.location.city} />
```

:::note
Recuerda, todos los datos en los componentes de Astro se obtienen cuando se renderiza el componente.

Cuando tu proyecto de Astro es desplegado obtendr치 los datos **una vez, en el momento de la compilaci칩n**. En desarrollo, ver치s el fetching de datos al actualizar los componentes. Si necesitas hacer fetching datos varias veces del lado del cliente, usa un [componente de framework](/es/core-concepts/framework-components/) o un [script del lado del cliente](/es/guides/client-side-scripts/) en el componente de Astro.
:::


## `fetch()` en componentes de framework

La funci칩n `fetch()` tambi칠n est치 disponible globalmente para cualquier [componente de framework](/es/core-concepts/framework-components/):

```tsx title="src/components/Movies.tsx" /await fetch\\(.*?\\)/
import type { FunctionalComponent } from 'preact';

const data = await fetch('https://example.com/movies.json').then((response) =>
  response.json()
);

// Los componentes que se procesan en la compilaci칩n se registran en la CLI.
// Cuando se renderizan con una directiva client:*, se registran en la consola del navegador.
console.log(data);

const Movies: FunctionalComponent = () => {
// Env칤a el resultado a la p치gina.
  return <div>{JSON.stringify(data)}</div>;
};

export default Movies;
```


### Consultas en GraphQL

Astro tambi칠n puede usar `fetch()` para consultar a un servidor GraphQL con cualquier query de GraphQL v치lida.

```astro title="src/components/Film.astro" "await fetch"
---
const response = await fetch("https://swapi-graphql.netlify.app/.netlify/functions/index",
  {
    method: 'POST',
    headers: {'Content-Type':'application/json'},
    body: JSON.stringify({
      query: `
        query getFilm ($id:ID!) {
          film(id: $id) {
            title
            releaseDate
          }
        }
      `,
      variables: {
        id: "ZmlsbXM6MQ==",
      },
    }),
  });

const json = await response.json();
const { film } = json.data;
---
<h1>Obteniendo informaci칩n sobre Star Wars: A New Hope</h1>
<h2>T칤tulo: {film.title}</h2>
<p>A침o: {film.releaseDate}</p>
```

## Fetching de datos desde un Headless CMS

Los componentes de Astro pueden obtener datos desde tu CMS favorito y luego renderizarlos como contenido en tu p치gina. Usando [rutas din치micas](/es/core-concepts/routing/#rutas-din치micas), los componentes pueden generar p치ginas basadas en el contenido obtenido del CMS.

Ve nuestras [gu칤as de CMS](/es/guides/cms/) para obtener m치s detalles sobre c칩mo integrar Astro con un headless CMS incluyendo Stroyblok, Contentful y WordPress.

## Recursos de la comunidad

- [Creando una app fullstack con Astro + GraphQL](https://robkendal.co.uk/blog/how-to-build-astro-site-with-graphql/)

---
type: integration
title: '@astrojs/lit'
description: Aprende c칩mo utilizar la integraci칩n del framework @astrojs/lit para extender el soporte de componentes en tu proyecto Astro.
githubURL: 'https://github.com/withastro/astro/tree/main/packages/integrations/lit/'
hasREADME: true
category: renderer
i18nReady: true
---

import Video from '~/components/Video.astro';

Esta **[integraci칩n de Astro][astro-integration]** permite renderizaci칩n en el servidor e hidrataci칩n en el cliente para tus elementos personalizados de [Lit](https://lit.dev/).

## Instalaci칩n

Hay dos formas de agregar integraciones a tu proyecto. 춰Intentemos primero la opci칩n m치s conveniente!

### Comando `astro add`

Astro incluye una herramienta CLI para agregar integraciones: `astro add`. Este comando har치:

1.  (Opcionalmente) Instalar todas las dependencias necesarias y dependencias pares asociadas
2.  (Tambi칠n opcionalmente) Actualizar tu archivo `astro.config.*` para aplicar esta integraci칩n

Para instalar `@astrojs/lit`,  ejecuta lo siguiente desde el directorio de tu proyecto y sigue las indicaciones:

```sh
# Usando NPM
npx astro add lit
# Usando Yarn
yarn astro add lit
# Usando PNPM
pnpm astro add lit
```

Si tienes alg칰n problema, [no dudes en inform치rnoslo en GitHub](https://github.com/withastro/astro/issues) y prueba los pasos de instalaci칩n manual a continuaci칩n.

### Instalar dependencias manualmente

Primero, instala la integraci칩n `@astrojs/lit` de la siguiente manera:

```sh
npm install @astrojs/lit
```

La mayor칤a de los gestores de paquetes tambi칠n instalar치n las dependencias de pares asociadas. Sin embargo, si ves una advertencia de "No se puede encontrar el paquete 'lit'" (o similar) cuando inicias Astro, necesitar치s instalar `lit` y `@webcomponents/template-shadowroot` de la siguiente manera:

```sh
npm install lit @webcomponents/template-shadowroot
```

Ahora, aplica esta integraci칩n a tu archivo `astro.config.*` utilizando la propiedad `integrations`:

```diff lang="js" "lit()"
  // astro.config.mjs
  import { defineConfig } from 'astro/config';
+ import lit from '@astrojs/lit';

  export default defineConfig({
    // ...
    integrations: [lit()],
    //             ^^^^^
  });
```

## Empezando

Para usar tu primer componente React en Astro, dir칤gete a nuestra [documentaci칩n de framework UI][astro-ui-frameworks]. Explorar치s:

*   游닍 como se cargan los componentes de framework,
*   游눦 opciones de hidrataci칩n del lado del cliente, y
*   游뱋 oportunidades para mezclar y anidar frameworks juntos

Escribir e importar un componente de Lit en Astro se ve as칤:

```js
// src/components/my-element.js
import { LitElement, html } from 'lit';

export class MyElement extends LitElement {
  render() {
    return html` <p>Hello world! From my-element</p> `;
  }
}

customElements.define('my-element', MyElement);
```

Ahora, el componente est치 listo para ser importado a trav칠s del frontmatter de Astro:

```astro
---
// src/pages/index.astro
import { MyElement } from '../components/my-element.js';
---

<MyElement />
```

> Ten en cuenta que Lit requiere que los globales del navegador, como `HTMLElement` y `customElements`, est칠n presentes. Por esta raz칩n, el renderizador de Lit simula estos globales en el servidor para que Lit pueda funcionar. Es posible que te encuentres con bibliotecas que funcionen incorrectamente debido a esto.

### Polyfills y Hidrataci칩n

El renderizador maneja autom치ticamente la adici칩n de los polifills adecuados para brindar soporte en navegadores que no tienen Declarative Shadow DOM. El polifill tiene un tama침o aproximado de *1.5kB*. Si el navegador admite Declarative Shadow DOM, se cargan menos de 250 bytes (para detectar la compatibilidad con la funci칩n).

La hidrataci칩n tambi칠n se maneja autom치ticamente. Puedes usar las mismas directivas de hidrataci칩n, como `client:load`, `client:idle` y `client:visible`, como lo har칤as con otras bibliotecas compatibles con Astro.

```astro
---
import { MyElement } from '../components/my-element.js';
---

<MyElement client:visible />
```

Lo anterior solo cargar치 el JavaScript del elemento cuando el usuario lo haya desplazado a la vista. Dado que se renderiza en el servidor, el usuario no ver치 ning칰n parpadeo; se cargar치 y se hidratar치 de manera transparente.

## Soluci칩n de problemas

Para obtener ayuda, consulta el canal `#support` en [Discord](https://astro.build/chat). 춰Nuestros amables miembros del Equipo de Soporte est치n aqu칤 para ayudar!

Tambi칠n puedes consultar nuestra [documentaci칩n de integraci칩n de Astro][astro-integration] para obtener m치s informaci칩n sobre las integraciones.

A continuaci칩n se enumeran algunos problemas comunes:

### Globales del navegador

La renderizaci칩n del lado del servidor (SSR) de la integraci칩n de Lit funciona mediante la adici칩n de algunas propiedades globales del navegador al entorno global. Algunas de las propiedades que se agregan incluyen `window`, `document` y `location`.

Estos globales *pueden* interferir con otras bibliotecas que utilizan la existencia de estas variables para detectar que se est치n ejecutando en el navegador, cuando en realidad se est치n ejecutando en el servidor. Esto puede provocar errores en estas bibliotecas.

Debido a esto, la integraci칩n de Lit puede no ser compatible con este tipo de bibliotecas. Una cosa que puede ayudar es cambiar el orden de las integraciones cuando Lit interfiere con otras integraciones:

```diff lang="js"
  // astro.config.mjs
  import { defineConfig } from 'astro/config';
  import vue from '@astrojs/vue';
  import lit from '@astrojs/lit';

  export default defineConfig({
-   integrations: [vue(), lit()]
+   integrations: [lit(), vue()]
  });
```

El orden correcto puede variar seg칰n la causa subyacente del problema. Sin embargo, no se garantiza que esto solucione todos los problemas, y algunas bibliotecas no se pueden utilizar si est치s utilizando la integraci칩n de Lit debido a esto.

### Gestores de paquetes estrictos

Cuando utilizas un [gestor de paquetes estricto](https://pnpm.io/pnpm-vs-npm#npms-flat-tree) como `pnpm`, es posible que obtengas un error como `ReferenceError: module is not defined` al ejecutar tu sitio. Para solucionar esto, debes elevar las dependencias de Lit con un archivo `.npmrc`:

```ini
# .npmrc
public-hoist-pattern[]=*lit*
```

### Limitaciones

La integraci칩n de Lit est치 impulsada por `@lit-labs/ssr`que tiene algunas limitaciones. Consulta su [documentaci칩n de limitaciones](https://www.npmjs.com/package/@lit-labs/ssr#user-content-notes-and-limitations) para obtener m치s informaci칩n al respecto.

## Contribuyendo

Este paquete es mantenido por el equipo central de Astro. 춰Est치s invitado a enviar un problema o PR!

[astro-integration]: /es/guides/integrations-guide/

[astro-ui-frameworks]: /es/core-concepts/framework-components/#usando-componente-de-framework

---
title: Configurando Astro
i18nReady: true
---

Customize o funcionamento do Astro adicionando um arquivo `astro.config.mjs` em seu projeto. Este √© um arquivo comum em projetos Astro e todos os templates oficiais o incluem por padr√£o.

üìö Leia a [refer√™ncia de configura√ß√£o da API](/pt-br/reference/configuration-reference/) do Astro para uma vis√£o geral de todas as op√ß√µes de configura√ß√£o suportadas.
## O Arquivo de Configura√ß√£o Astro

Um arquivo de configura√ß√£o Astro v√°lido exporta sua configura√ß√£o com a exporta√ß√£o `default`, usando a fun√ß√£o auxiliar `defineConfig`:

```js
// astro.config.mjs
import { defineConfig } from 'astro/config'

export default defineConfig({
  // suas op√ß√µes de configura√ß√£o aqui...
  // https://docs.astro.build/pt-br/reference/configuration-reference/
})
```

Usar `defineConfig()` √© recomendado para dicas de tipagem autom√°ticas na sua IDE por√©m tamb√©m √© opcional. Uma configura√ß√£o m√≠nima v√°lida se pareceria com algo assim:

```js title="astro.config.mjs"
// Exemplo: Configura√ß√£o m√≠nima, um arquivo vazio
export default {}
```

## Tipos de Arquivo de Configura√ß√£o Suportados

Astro suporta outros formatos de arquivos para seu arquivo de configura√ß√£o JavaScript: `astro.config.js`, `astro.config.mjs`, `astro.config.cjs` e `astro.config.ts`. N√≥s recomendamos utilizar `.mjs` na maioria dos casos ou `.ts` se voc√™ quiser escrever TypeScript no seu arquivo de configura√ß√£o.

O arquivo de configura√ß√£o TypeScript √© gerenciado usando o [`tsm`](https://github.com/lukeed/tsm) e ir√° respeitar as op√ß√µes definidas no `tsconfig` do seu projeto.
## Resolu√ß√£o do Arquivo de Configura√ß√£o

Astro ir√° tentar buscar automaticamente um arquivo de configura√ß√£o com o nome `astro.config.mjs` na raiz de seu projeto. Se nenhum arquivo for encontrado, as op√ß√µes padr√£o do Astro ser√£o utilizadas.

```bash
# Exemplo: L√™ sua configura√ß√£o em ./astro.config.mjs
astro build
```

Voc√™ pode passar o arquivo de configura√ß√£o explicitamente usando a op√ß√£o `--config` da interface de linha de comando. Esta op√ß√£o sempre busca o arquivo relativo ao diret√≥rio no qual voc√™ est√° executando o comando `astro` em seu terminal.

```bash
# Exemplo: L√™ suas op√ß√µes de configura√ß√£o neste arquivo
astro build --config minha-configuracao.js
```

## IntelliSense da Configura√ß√£o

Astro recomenda o uso da fun√ß√£o auxiliar `defineConfig()` em seu arquivo de configura√ß√£o. `defineConfig()` proporciona IntelliSense autom√°tico em sua IDE. Editores como VSCode s√£o capazes de ler as defini√ß√µes de tipo TypeScript do Astro e providencia dicas de tipagem JSDoc autom√°ticas, mesmo que seu arquivo de configura√ß√£o n√£o esteja escrito em TypeScript.

```js 
// astro.config.mjs
import { defineConfig } from 'astro/config'

export default defineConfig({
  // Seu arquivo de configura√ß√£o aqui...
  // https://docs.astro.build/pt-br/reference/configuration-reference/
})
```

Voc√™ tamb√©m pode providenciar manualmente as defini√ß√µes de tipo para o VSCode, usando essa nota√ß√£o JSDoc:

```js
// astro.config.mjs
export default /** @type {import('astro').AstroUserConfig} */ {
  // Seu arquivo de configura√ß√£o aqui...
  // https://docs.astro.build/pt-br/reference/configuration-reference/
}
```

## Referenciando Arquivos Relativos

Se voc√™ providenciar um caminho relativo √† op√ß√£o `root` ou passar a op√ß√£o `--root` da interface de linha de comando, Astro ir√° resolver os arquivos de acordo com o diret√≥rio que o comando `astro` estiver executando.

```js
// astro.config.mjs
import { defineConfig } from 'astro/config'

export default defineConfig({
  // Resolve o caminho "./foo" em seu diret√≥rio de trabalho atual.
  root: 'foo'
})
```

Astro ir√° resolver todos os outros arquivos e diret√≥rios relativos √† raiz do projeto definida:

```js
// astro.config.mjs
import { defineConfig } from 'astro/config'

export default defineConfig({
  // Resolve o caminho "./foo" em seu diret√≥rio de trabalho atual.
  root: 'foo',
  // Resolve o caminho "./foo/public" em seu diret√≥rio de trabalho atual.
  publicDir: 'public',
})
```

Para referenciar um arquivo ou diret√≥rio relativo ao arquivo de configura√ß√£o, use `import.meta.url` (a menos que voc√™ esteja em um arquivo common.js `astro.config.cjs`):

```js "import.meta.url"
// astro.config.mjs
import { defineConfig } from 'astro/config'

export default defineConfig({
  // Resolve o caminho "./foo" relativo a este arquivo de configura√ß√£o.
  root: new URL("./foo", import.meta.url).toString(),
  // Resolve o caminho "./public" relativo a este arquivo de configura√ß√£o.
  publicDir: new URL("./public", import.meta.url).toString(),
})
```

:::note
Propriedades espec√≠ficas do Vite de `import.meta`, como `import.meta.env` ou `import.meta.glob`, _n√£o_ s√£o acess√≠veis em seu arquivo de configura√ß√£o. N√≥s recomendamos alternativas como [dotenv](https://github.com/motdotla/dotenv) ou [fast-glob](https://github.com/mrmlnc/fast-glob) para esses respectivos casos de uso.
:::

## Customizando Nomes de Arquivos Finais

Para c√≥digo que o Astro processa, como arquivos JavaScript e CSS importados, voc√™ pode customizar os nomes de arquivos finais utilizando [`entryFileNames`](https://rollupjs.org/guide/en/#outputentryfilenames), [`chunkFileNames`](https://rollupjs.org/guide/en/#outputchunkfilenames), e [`assetFileNames`](https://rollupjs.org/guide/en/#outputassetfilenames) na entrada `vite.build.rollupOptions` no seu arquivo `astro.config.*`.

```js ins={9-11}
// astro.config.mjs
import { defineConfig } from 'astro/config'

export default defineConfig({
  vite: {
    build: {
      rollupOptions: {
        output: {
          entryFileNames: 'entry.[hash].mjs',
          chunkFileNames: 'chunks/chunk.[hash].mjs',
          assetFileNames: 'assets/asset.[hash][extname]',
        },
      },
    },
  },
})
```

Isto pode ser √∫til caso voc√™ tenha scripts com nomes que podem ser afetados por bloqueadores de an√∫ncios (ex. `ads.js` ou `google-tag-manager.js`).

## Vari√°veis de Ambiente

Astro verifica arquivos de configura√ß√£o antes de carregar seus outros arquivos. Portanto, voc√™ n√£o pode utilizar `import.meta.env` para acessar vari√°veis de ambiente que foram definidas em arquivos `.env`. 
Voc√™ pode utilizar `process.env` em um arquivo de configura√ß√£o para acessar outras vari√°veis de ambiente, como aquelas [definidas pela CLI](/pt-br/guides/environment-variables/#usando-a-cli).

Voc√™ tamb√©m pode utilizar [o utilit√°rio `loadEnv` do Vite](https://main.vitejs.dev/config/#using-environment-variables-in-config) para manualmente carregar arquivos `.env`.

:::note
O `pnpm` n√£o permite voc√™ importar m√≥dulos que n√£o est√£o diretamente instalados no seu projeto. Se voc√™ est√° usando `pnpm`, voc√™ ter√° que instalar `vite` para usar o utilit√°rio `loadEnv`.
```sh
pnpm install vite --save-dev
```
:::

```js title="astro.config.mjs"
import { loadEnv } from "vite";
const { SENHA_SECRETA } = loadEnv(process.env.NODE_ENV, process.cwd(), "");
```

## Refer√™ncia de Configura√ß√£o

üìö Leia a [refer√™ncia de configura√ß√£o da API](/pt-br/reference/configuration-reference/) do Astro para uma vis√£o geral de todas as op√ß√µes de configura√ß√£o suportadas.


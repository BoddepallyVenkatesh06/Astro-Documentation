---
title: Configurer Astro
i18nReady: true
---

Personnalisez le fonctionnement d'Astro en ajoutant un fichier `astro.config.mjs` dans votre projet. C'est un fichier commun dans les projets Astro, et tous les exemples officiels de mod√®les et de th√®mes sont livr√©s avec un fichier par d√©faut.

üìö Lisez la [doc de r√©f√©rence de l'API d'Astro](/fr/reference/configuration-reference/) pour une vue d'ensemble de toutes les options de configuration support√©es.

## Le Fichier de Configuration d'Astro

Un fichier de configuration Astro valide exporte sa configuration en utilisant l'export `default`, en utilisant l'aide `defineConfig` recommand√©e :

```js
// astro.config.mjs
import { defineConfig } from 'astro/config'

export default defineConfig({
  // vos options de configuration ici...
  // https://docs.astro.build/fr/reference/configuration-reference/
})
```

L'utilisation de `defineConfig()` est recommand√© pour obtenir l'aide sur les types utilis√©s dans votre √©diteur de code (IDE), mais elle est aussi optionnelle. Un fichier de configuration minimal valide pourrait ressembler √† √ßa :

```js
// Exemple : Fichier de configuration minimal, vide
export default {}
```

## Types de Fichier de Configuration Support√©s

Astro supporte plusieurs formats de fichiers pour son fichier de configuration JavaScript : `astro.config.js`, `astro.config.mjs`, `astro.config.cjs` et `astro.config.ts`. Nous recommandons d'utiliser `.mjs` dans la plupart des cas o√π `.ts` si vous voulez √©crire du TypeScript dans votre fichier de configuration.

Le chargement du fichier de configuration TypeScript est g√©r√© par [`tsm`](https://github.com/lukeed/tsm) respectera les options tsconfig de votre projet.

## R√©solution du fichier de configuration

Astro va automatiquement essayer de r√©soudre un fichier de configuration nomm√© `astro.config.mjs` √† la racine du projet. Si aucun fichier de configuration n'est trouv√© √† la racine de votre projet, les options par d√©faut d'Astro seront utilis√©es.

```bash
# Exemple : Lit votre configuration √† partir de ./astro.config.mjs
astro build
```

Vous pouvez explicitement d√©finir un fichier de configuration √† utiliser avec l'option `--config` depuis l'interface de commande en ligne CLI. Cette option est toujours relative au r√©pertoire de travail actuel dans lequel vous avez lanc√© la commande `astro`.

```bash
# Exemple : Lit votre configuration √† partir de ce fichier
astro build --config mon-fichier-config.js
```

## Autocompl√©tion de configuration

Astro recommande d'utiliser l'aide `defineConfig()` dans votre fichier de configuration. `defineConfig()` fournit une autocompl√©tion automatique dans votre IDE. Les √©diteurs comme VSCode sont capables de lire les d√©finitions de type TypeScript d'Astro et de fournir des indications de type JSDoc automatiques, m√™me si votre fichier de configuration n'est pas √©crit en TypeScript.

```js
// astro.config.mjs
import { defineConfig } from 'astro/config'

export default defineConfig({
  // vos options de configuration ici...
  // https://docs.astro.build/fr/reference/configuration-reference/
})
```

Vous pouvez √©galement fournir des d√©finitions de type manuellement √† VSCode, en utilisant cette notation JSDoc :

```js
// astro.config.mjs
 export default /** @type {import('astro').AstroUserConfig} */ ({
  // vos options de configuration ici...
  // https://docs.astro.build/fr/reference/configuration-reference/
}
```

## R√©f√©rencement des fichiers relatifs

Si vous fournissez un chemin relatif √† `root` ou √† l'option `--root`, Astro r√©soudera ce chemin par rapport au r√©pertoire de travail actuel o√π vous avez lanc√© la commande `astro`.

```js
// astro.config.mjs
import { defineConfig } from 'astro/config'

export default defineConfig({
  // Cherches vers le r√©pertoire "./foo" dans le r√©pertoire de travail actuel
  root: 'foo'
})
```

Astro va chercher toutes les autres cha√Ænes relatives de fichiers et de r√©pertoires par rapport √† la racine du projet :

```js
// astro.config.mjs
import { defineConfig } from 'astro/config'

export default defineConfig({
  // Se dirige vers le r√©pertoire "./foo" dans le r√©pertoire de travail actuel
  root: 'foo',
  // Se dirige vers le r√©pertoire "./foo/public" dans le r√©pertoire de travail actuel
  publicDir: 'public',
})
```

Pour r√©f√©rencer un fichier ou un r√©pertoire relatif au fichier de configuration, utilisez `import.meta.url` (sauf si vous √©crivez un fichier common.js `astro.config.cjs`).

```js "import.meta.url"
// astro.config.mjs
import { defineConfig } from 'astro/config'

export default defineConfig({
  // Se dirige vers le r√©pertoire "./foo", relatif √† ce fichier de configuration
  root: new URL("./foo", import.meta.url).toString(),
  // Se dirige vers le r√©pertoire "./public", relatif √† ce fichier de configuration
  publicDir: new URL("./public", import.meta.url).toString(),
})
```

:::note
{/* Il faut utiliser <code> ici car Vite fait un remplacement automatique sur import-meta-env qui casse le rendu. */}
Les propri√©t√©s `import.meta` sp√©cifiques √† Vite, comme <code>{'import.meta.env'}</code> ou `import.meta.glob`, ne sont _pas_ accessibles depuis votre fichier de configuration. Nous recommandons des alternatives comme [dotenv](https://github.com/motdotla/dotenv) ou [fast-glob](https://github.com/mrmlnc/fast-glob) pour ces cas d'utilisation respectifs.
:::

## Personnalisation des noms de fichiers de sortie

Pour le code qu'Astro traite, comme les fichiers JavaScript ou CSS import√©s, vous pouvez personnaliser les noms de fichiers de sortie en utilisant [`entryFileNames` (EN)](https://rollupjs.org/guide/en/#outputentryfilenames), [`chunkFileNames` (EN)](https://rollupjs.org/guide/en/#outputchunkfilenames), et [`assetFileNames` (EN)](https://rollupjs.org/guide/en/#outputassetfilenames) dans une entr√©e `vite.build.rollupOptions` de votre fichier  `astro.config.*`.

```js ins={9-11}
// astro.config.mjs
import { defineConfig } from 'astro/config'

export default defineConfig({
  vite: {
    build: {
      rollupOptions: {
        output: {
          entryFileNames: 'entry.[hash].mjs',
          chunkFileNames: 'chunks/chunk.[hash].mjs',
          assetFileNames: 'assets/asset.[hash][extname]',
        },
      },
    },
  },
})
```

Cela peut √™tre utile si vous avez des scripts dont les noms peuvent √™tre affect√©s par des bloqueurs de publicit√© (par exemple `ads.js` ou `google-tag-manager.js`).

## Variables d'Environment
Astro √©value les fichiers de configuration avant de charger vos autres fichiers. Ainsi, vous ne pouvez pas utiliser `import.meta.env` pour acc√©der aux variables d'environnement qui ont √©t√© d√©finies dans les fichiers `.env`. 

Vous pouvez utiliser `process.env` dans un fichier de configuration pour acc√©der √† d'autres variables d'environnement, comme celles [d√©finies par le CLI](/fr/guides/environment-variables/#utilisation-en-cli).

Vous pouvez √©galement utiliser l'[aide `loadEnv` de Vite (EN)](https://main.vitejs.dev/config/#using-environment-variables-in-config) pour charger manuellement les fichiers `.env`.

:::note
`pnpm` ne vous permet pas d'importer des modules qui ne sont pas directement install√©s dans votre projet. Si vous utilisez `pnpm`, vous devrez installer `vite` pour utiliser l'aide `loadEnv`.
```sh
pnpm add vite --save-dev
```
:::

```js title="astro.config.mjs"
import { loadEnv } from "vite";
const { SECRET_PASSWORD } = loadEnv(process.env.NODE_ENV, process.cwd(), "");
```

## R√©f√©rence de configuration

üìö Lisez la documentation de r√©f√©rence [sur la configuration de l'API d'Astro](/fr/reference/configuration-reference/) pour une vue d'ensemble des options de configuration support√©es.
